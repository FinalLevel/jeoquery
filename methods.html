<!DOCTYPE html>
<html>
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>jeoQuery methods</title>
        <link rel="stylesheet" href="bootstrap.min.css"
        />
        <link rel="stylesheet" href="bootstrap-responsive.min.css"
        />
        <link rel="stylesheet" href="jeoquery.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script type="text/javascript" src="jstree/jquery.jstree.js"></script>
        <script type="text/javascript" src="jeoquery.js"></script>
    </head>
    
    <body class="container">
        <script type="text/javascript">
            function mapJsTreeNode(obj) {
                var a = [];
                for (var key in obj) {
                    var node = {
                        "data": key + ""
                    };
                    var nodeContent = obj[key];
                    var type = typeof (nodeContent);
                    if (type != "object") {
                        if (type == "string") {
                            node["data"] += " = \"" + nodeContent + "\"";
                        }
                        else {
                            node["data"] += " = " + nodeContent;
                        }
                        if (key == "geonameId") {
                            node["attr"] = {
                                "rel": "world"
                            };
                        }
                        else {
                            node["attr"] = {
                                "rel": "leaf"
                            };
                        }
                    }
                    else {
                        if (Object.prototype.toString.call(nodeContent) === '[object Array]') {
                            node["attr"] = {
                                "rel": "application_view_list"
                            };
                        }
                        node["children"] = [mapJsTreeNode(obj[key])];
                    }
                    a.push(node);
                }
                return a;
            }

            function dbg(data) {
                $("#debug2").html(JSON.stringify(data));
                var treeJSON = mapJsTreeNode(data);

                $("#debug").jstree({
                    "json_data": {
                        "data": treeJSON
                    },
                    "types": {
                        "types": {
                            "max_children": -2,
                            "max_depth": -2,
                            "default": {
                                "valid_children": ["default"],
                                "select_node": function (e) {
                                    this.toggle_node(e);
                                    return false;
                                }
                            }
                        }
                    },
                    "plugins": ["themes", "json_data", "ui", "types"]
                });
            }
            $(function () {
                jeoquery.defaultData.userName = 'tompi';
            });
        </script>
        <div class="row">
            <div class="well">
                <span style="font-size: 40px; float: right; padding-top: 20px; color: #363;">GeoNames</span>
                <img src="http://www.geonames.org/img/globe.gif" style="float: right;"
                alt="Geonames logo" />
                <span style="font-size: 76px; float: right; padding-top: 20px;">+</span>
                <img src="img/jquery.png"
                style="float: right;" alt="jQuery logo" />
                <h2>jeoQuery
                    <small>by Thomas Haukland</small>
                </h2>
                <h3>Geonames methods</h3>
            </div>
        </div>
        <div class="row">
            <p>Click a method, and explore the resulting json tree.</p>
        </div>
        <div class="row" id="directCalls">
          <a class="btn" href="#" onclick="jeoquery.getGeoNames('astergdem', { lat: '50.01', lng: '10.2' }, dbg);return false;">
			 astergdem
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('children', { geonameId: 3175395 }, dbg);return false;">
			 children
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('cities', { north: '44.1', south: '-9.9', east: '-22.4', west: '55.2' }, dbg);return false;">
			 cities
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('countryCode', { lat: '47.03', lng: '10.2' }, dbg);return false;">
			 countryCode
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('countryInfo', { country: 'GB' }, dbg);return false;">
			 countryInfo
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('countrySubdivision', { lat: '47.03', lng: '10.2', level: '1' }, dbg);return false;">
			 countrySubdivision
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('earthquakes', { north: '44.1', south: '-9.9', east: '-22.4', west: '55.2' }, dbg);return false;">
			 earthquakes
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearby', { lat: '47.03', lng: '10.2' }, dbg);return false;">
			 findNearby
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearbyPlaceName', { lat: '47.03', lng: '10.2' }, dbg);return false;">
			 findNearbyPlaceName
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearbyPostalCodes', { lat: '47.03', lng: '10.2' }, dbg);return false;">
			 findNearbyPostalCodes
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearbyStreets', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 findNearbyStreets
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearbyStreetsOSM', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 findNearbyStreetsOSM
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearByWeather', { lat: '43', lng: '-2' }, dbg);return false;">
			 findNearByWeather
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearbyWikipedia', { lat: '47', lng: '9' }, dbg);return false;">
			 findNearbyWikipedia
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearestAddress', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 findNearestAddress
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearestIntersection', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 findNearestIntersection
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearestIntersectionOSM', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 findNearestIntersectionOSM
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('findNearbyPOIsOSM', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 findNearbyPOIsOSM
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('get', { geonameId: 3175395 }, dbg);return false;">
			 get
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('gtopo30', { lat: '37.451', lng: '-122.18' }, dbg);return false;">
			 gtopo30
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('hierarchy', { geonameId: 3175395 }, dbg);return false;">
			 hierarchy
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('neighbourhood', { lat: '40.78343', lng: '-73.96625' }, dbg);return false;">
			 neighbourhood
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('neighbours', { geonameId: 2658434 }, dbg);return false;">
			 neighbours
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('ocean', { lat: '40.78343', lng: '-43.96625' }, dbg);return false;">
			 ocean
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('postalCodeCountryInfo', {}, dbg);return false;">
			 postalCodeCountryInfo
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('postalCodeLookup', { postalcode: 4624, country: 'NO' }, dbg);return false;">
			 postalCodeLookup
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('postalCodeSearch', { postalcode: 9011 }, dbg);return false;">
			 postalCodeSearch
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('search', { q: 'london' }, dbg);return false;">
			 search
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('siblings', { geonameId: 3017382 }, dbg);return false;">
			 siblings
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('srtm3', { lat: '50.01', lng: '10.2' }, dbg);return false;">
			 srtm3
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('timezone', { lat: '47.01', lng: '10.2' }, dbg);return false;">
			 timezone
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('weather', { north: '44.1', south: '-9.9', east: '-22.4', west: '55.2' }, dbg);return false;">
			 weather
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('weatherIcao', { ICAO: 'LSZH' }, dbg);return false;">
			 weatherIcao
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('wikipediaBoundingBox', { north: '44.1', south: '-9.9', east: '-22.4', west: '55.2' }, dbg);return false;">
			 wikipediaBoundingBox
			</a>
      <a class="btn" href="#" onclick="jeoquery.getGeoNames('wikipediaSearch', { q: 'ibsen' }, dbg);return false;">
			 wikipediaSearch
			</a>
        </div>
        <div class="row">
            <div>
                <h3>Result as a tree:</h3>
                <div id="debug" class="well"></div>
                <h3>Raw result:</h3>
                <div id="debug2" class="well"></div>
            </div>
        </div>
    </body

</html>
